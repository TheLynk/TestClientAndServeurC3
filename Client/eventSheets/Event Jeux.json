{
	"name": "Event Jeux",
	"events": [
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-start-of-layout",
					"objectClass": "System",
					"sid": 750453843868049
				}
			],
			"actions": [
				{
					"id": "connect",
					"objectClass": "Multiplayer",
					"sid": 311811437663426,
					"parameters": {
						"server": "\"wss://multiplayer.scirra.com\""
					}
				},
				{
					"id": "set-eventvar-value",
					"objectClass": "System",
					"sid": 674583724498781,
					"parameters": {
						"variable": "HostName",
						"value": "\"Serveur\" & projectversion"
					}
				},
				{
					"id": "check-item-exists",
					"objectClass": "LocalStorage",
					"sid": 134157092341366,
					"parameters": {
						"key": "\"UUID\""
					}
				}
			],
			"sid": 186882079146099
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-item-missing",
					"objectClass": "LocalStorage",
					"sid": 979332697729971,
					"parameters": {
						"key": "\"UUID\""
					}
				}
			],
			"actions": [],
			"sid": 912389151151740,
			"children": [
				{
					"eventType": "script",
					"script": "runtime.globalVars.UUID = (Math.round(Date.now() * performance.now())).toString()"
				},
				{
					"eventType": "block",
					"conditions": [],
					"actions": [
						{
							"id": "set-item",
							"objectClass": "LocalStorage",
							"sid": 684896037500111,
							"parameters": {
								"key": "\"UUID\"",
								"value": "UUID"
							}
						}
					],
					"sid": 193818458218258
				}
			]
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-item-exists",
					"objectClass": "LocalStorage",
					"sid": 638713777754026,
					"parameters": {
						"key": "\"UUID\""
					}
				}
			],
			"actions": [
				{
					"id": "get-item",
					"objectClass": "LocalStorage",
					"sid": 880330428059517,
					"parameters": {
						"key": "\"UUID\""
					}
				}
			],
			"sid": 921618910245464
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-item-get",
					"objectClass": "LocalStorage",
					"sid": 174656338946072,
					"parameters": {
						"key": "\"UUID\""
					}
				}
			],
			"actions": [
				{
					"id": "set-eventvar-value",
					"objectClass": "System",
					"sid": 155807072846238,
					"parameters": {
						"variable": "UUID",
						"value": "LocalStorage.ItemValue"
					}
				}
			],
			"sid": 626948686905552
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "is-connected",
					"objectClass": "Multiplayer",
					"sid": 256114091913580,
					"isInverted": true
				}
			],
			"actions": [
				{
					"id": "set-text",
					"objectClass": "TextConnection",
					"sid": 902565170963601,
					"parameters": {
						"text": "\"Connection Status : Erreur de connection\""
					}
				},
				{
					"id": "wait",
					"objectClass": "System",
					"sid": 894911882463076,
					"parameters": {
						"seconds": "1.0"
					}
				},
				{
					"id": "connect",
					"objectClass": "Multiplayer",
					"sid": 685723131931748,
					"parameters": {
						"server": "\"wss://multiplayer.scirra.com\""
					}
				}
			],
			"sid": 647017259111471
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-connected",
					"objectClass": "Multiplayer",
					"sid": 296241571397157
				}
			],
			"actions": [
				{
					"id": "log-in",
					"objectClass": "Multiplayer",
					"sid": 473768247108305,
					"parameters": {
						"alias": "UUID"
					}
				}
			],
			"sid": 673866142714605
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-logged-in",
					"objectClass": "Multiplayer",
					"sid": 477819252849117
				}
			],
			"actions": [
				{
					"id": "join-room",
					"objectClass": "Multiplayer",
					"sid": 382582840155425,
					"parameters": {
						"game": "\"TestClientServeurC3\"",
						"instance": "\"Principale\"",
						"room": "\"Principale\"",
						"max-peers": "0"
					}
				}
			],
			"sid": 564944706962670
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-joined-room",
					"objectClass": "Multiplayer",
					"sid": 846955780756400
				}
			],
			"actions": [
				{
					"id": "set-text",
					"objectClass": "TextConnection",
					"sid": 909273819673367,
					"parameters": {
						"text": "\"Connection Status : Ok\" & newline \n& \"Host Alias : \" & Multiplayer.HostAlias  & newline\n& \"Peer Alias : \" & Multiplayer.PeerAlias & newline\n& \"Peer ID : \" & Multiplayer.PeerID"
					}
				}
			],
			"sid": 795368290811587
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "compare-eventvar",
					"objectClass": "System",
					"sid": 424949313060065,
					"parameters": {
						"variable": "HostName",
						"comparison": 1,
						"value": "\"Serveur\" & projectversion"
					}
				}
			],
			"actions": [
				{
					"id": "disconnect-signalling",
					"objectClass": "Multiplayer",
					"sid": 172992002766461
				},
				{
					"id": "set-text",
					"objectClass": "TextConnection",
					"sid": 269109278332373,
					"parameters": {
						"text": "\"Connection Status : Erreur Serveur\""
					}
				},
				{
					"id": "wait",
					"objectClass": "System",
					"sid": 845199857258110,
					"parameters": {
						"seconds": "1.0"
					}
				}
			],
			"sid": 344629392773605
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "else",
					"objectClass": "System",
					"sid": 772085731944169
				},
				{
					"id": "compare-boolean-eventvar",
					"objectClass": "System",
					"sid": 327360012982743,
					"parameters": {
						"variable": "DataLoad"
					},
					"isInverted": true
				}
			],
			"actions": [
				{
					"id": "send-message",
					"objectClass": "Multiplayer",
					"sid": 772441073604986,
					"parameters": {
						"peer-id": "\"\"",
						"tag": "\"LoadData\"",
						"message": "\"\"",
						"mode": "reliable-ordered"
					}
				}
			],
			"sid": 961723674021844
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-clicked",
					"objectClass": "ButtonSend",
					"sid": 489896392893680
				}
			],
			"actions": [
				{
					"id": "send-message",
					"objectClass": "Multiplayer",
					"sid": 380966147483339,
					"parameters": {
						"peer-id": "\"\"",
						"tag": "\"debugmessage\"",
						"message": "TextInputMessageDebug.Text",
						"mode": "reliable-ordered"
					}
				},
				{
					"id": "set-text",
					"objectClass": "TextInputMessageDebug",
					"sid": 857777314861525,
					"parameters": {
						"text": "\"\""
					}
				}
			],
			"sid": 311733890323494
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "is-focused",
					"objectClass": "TextInputMessageDebug",
					"sid": 349501367276575
				},
				{
					"id": "key-is-down",
					"objectClass": "Keyboard",
					"sid": 323205005107951,
					"parameters": {
						"key": 13
					}
				}
			],
			"actions": [
				{
					"id": "set-unfocused",
					"objectClass": "TextInputMessageDebug",
					"sid": 747805198302247
				},
				{
					"id": "send-message",
					"objectClass": "Multiplayer",
					"sid": 834517411030141,
					"parameters": {
						"peer-id": "\"\"",
						"tag": "\"debugmessage\"",
						"message": "TextInputMessageDebug.Text",
						"mode": "reliable-ordered"
					}
				},
				{
					"id": "set-text",
					"objectClass": "TextInputMessageDebug",
					"sid": 544305538444733,
					"parameters": {
						"text": "\"\""
					}
				},
				{
					"id": "set-focused",
					"objectClass": "TextInputMessageDebug",
					"sid": 614211596888085
				}
			],
			"sid": 189851722389232
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-peer-message",
					"objectClass": "Multiplayer",
					"sid": 709451676270638,
					"parameters": {
						"tag": "\"debugmessage\""
					}
				}
			],
			"actions": [],
			"sid": 574389056689281,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-two-values",
							"objectClass": "System",
							"sid": 449169597657817,
							"parameters": {
								"first-value": "Multiplayer.FromID",
								"comparison": 0,
								"second-value": "UUID"
							}
						}
					],
					"actions": [
						{
							"id": "append-text",
							"objectClass": "TextInputTChat",
							"sid": 473508492079183,
							"parameters": {
								"text": "\"You : \" & Multiplayer.Message & newline"
							}
						}
					],
					"sid": 182096514335277
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 505398354567741
						}
					],
					"actions": [
						{
							"id": "append-text",
							"objectClass": "TextInputTChat",
							"sid": 929832375632969,
							"parameters": {
								"text": "Multiplayer.FromID & \" : \" & Multiplayer.Message & newline"
							}
						}
					],
					"sid": 196164705798937
				}
			]
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-peer-message",
					"objectClass": "Multiplayer",
					"sid": 887715079447140,
					"parameters": {
						"tag": "\"HostToPeerData\""
					}
				}
			],
			"actions": [
				{
					"id": "append-text",
					"objectClass": "TextInputTChat",
					"sid": 900008541845603,
					"parameters": {
						"text": "\"HostToPeerData\" & newline"
					}
				},
				{
					"id": "load",
					"objectClass": "Array",
					"sid": 547175773379906,
					"parameters": {
						"json": "Multiplayer.Message"
					}
				},
				{
					"id": "set-boolean-eventvar",
					"objectClass": "System",
					"sid": 883102828632802,
					"parameters": {
						"variable": "DataLoad",
						"value": "true"
					}
				}
			],
			"sid": 554276464629726
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-clicked",
					"objectClass": "ButtonSave",
					"sid": 184758156430360
				}
			],
			"actions": [
				{
					"id": "set-at-x",
					"objectClass": "Array",
					"sid": 603468169681271,
					"parameters": {
						"x": "0",
						"value": "int(random(0, 10))"
					}
				},
				{
					"id": "append-text",
					"objectClass": "TextInputTChat",
					"sid": 843110626616616,
					"parameters": {
						"text": "Array.AsJSON & newline"
					}
				},
				{
					"id": "append-text",
					"objectClass": "TextInputTChat",
					"sid": 924493292809951,
					"parameters": {
						"text": "\"Save faite\" & newline"
					}
				},
				{
					"id": "send-message",
					"objectClass": "Multiplayer",
					"sid": 479529096934374,
					"parameters": {
						"peer-id": "\"\"",
						"tag": "\"PeerToHostData\"",
						"message": "Array.AsJSON",
						"mode": "reliable-ordered"
					}
				}
			],
			"sid": 365786115584576
		}
	],
	"sid": 423672231501610
}